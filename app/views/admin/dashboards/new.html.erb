<div class="column span-24">
  <div class="span-24 prepend-top">
    <h2>View Images</h2>
    <fieldset class="formbg">
      <div >
        <h4>View Images Here</h4>
        <div class="span-23">
          <% @global_images.each do |image| %>
          <div class="span-4">
            <%= link_to image_tag(image.attachment.url(:medium)), image.attachment.url, :rel => "example2" %>
           
              <%= link_to image_tag("cross.png"), admin_delete_image_url(image) %>
          </div>
          <% end %>
        </div>
      </div>

      <% form_for(@dashboard, :url => admin_dashboards_path, :html => {:multipart => true}, :class => "inline") do |f| %>
        <%= f.error_messages %>
      
        <h4>Upload Images Here</h4>

        <%= link_to_function "Click Here", "$('.mainbox_upload').toggle()" %> <b>To upload images</b>

        <div class="mainbox_upload" style="display:none;">
          <div class="span-12">
            <% 5.times do |i| %>
              <% fields_for :images do |image_form| %>
                <div class="span-3">
                  <%= image_form.label :image, "Image" %>
                </div>
                <div class="span-8 last">
                  <%= image_form.file_field :"attachment_#{i}" %>
                </div>
              <% end %>
            <% end %>
          </div>
          
        <div class="span-22">
           <%= f.submit "Upload" %>
        </div>
        
        <% end %>
           </div>
        <div class="clear"></div>

     
    </fieldset>
  </div>
</div>



<script>
  $(document).ready(function(){
    //Examples of how to assign the ColorBox event to elements

    $("a[rel='example2']").colorbox({transition:"fade"});

    //Example of preserving a JavaScript event for inline calls.
    $("#click").click(function(){
      $('#click').css({"background-color":"#f00", "color":"#fff", "cursor":"inherit"}).text("Open this window again and this message will still be here.");
      return false;
    });

  $("#images_attachment_0").change(function(){
    var ext = $("#images_attachment_0").val().split('.').pop().toLowerCase();
    var allow = new Array('jpeg', 'pjpeg','jpg', 'png');
    if(jQuery.inArray(ext, allow) == -1) {
       $("#images_attachment_0").val('');
       jQuery.flash.success('Congratulations', 'You clicked a link and it worked!')
      alert('invalid extension!');
   } 
  });
  $("#images_attachment_1").change(function(){
    var ext = $("#images_attachment_1").val().split('.').pop().toLowerCase();
    var allow = new Array('jpeg', 'pjpeg','jpg', 'png');
    if(jQuery.inArray(ext, allow) == -1) {
       $("#images_attachment_1").val('');
      alert('invalid extension!');
   }
  });
  $("#images_attachment_2").change(function(){
    var ext = $("#images_attachment_2").val().split('.').pop().toLowerCase();
    var allow = new Array('jpeg', 'pjpeg','jpg', 'png');
    if(jQuery.inArray(ext, allow) == -1) {
       $("#images_attachment_2").val('');
      alert('invalid extension!');
   }
  });
  $("#images_attachment_3").change(function(){
    var ext = $("#images_attachment_3").val().split('.').pop().toLowerCase();
    var allow = new Array('jpeg', 'pjpeg','jpg', 'png');
    if(jQuery.inArray(ext, allow) == -1) {
       $("#images_attachment_3").val('');
      alert('invalid extension!');
   }
  });
  $("#images_attachment_4").change(function(){
    var ext = $("#images_attachment_4").val().split('.').pop().toLowerCase();
    var allow = new Array('jpeg', 'pjpeg','jpg', 'png');
    if(jQuery.inArray(ext, allow) == -1) {
       $("#images_attachment_4").val('');
      alert('invalid extension!');
   }
  });
  });
</script>